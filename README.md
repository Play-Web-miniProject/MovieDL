# 딥러닝을 활용한 영화 투자 조건 분석 
<br> 팀명: 5OS(오링스)
<br> 이예지: 크롤링
<br> 안태현: 데이터 수집 및 전처리 
<br> 유정현: 데이터 수집 및 전처리 
<br> 오성진: 딥러닝 모델 선정 및 학습
<br> 오수연: 딥러닝 모델 선정 및 학습
<br> ###제출 파일( 발표자료 및 코드, 데이터 포함)  
<br> 1) KOBIS_개봉일람_ 2023-03-20.csv
<br> 2) movie_resize.csv
<br> 3)
<br> 4)
<br>  

---

### 2023.03.20.월 회의록   
<데이터 확인 및 전처리 과정>   
(DataFrame 이름을 df로 하는 것을 가정)   
1. df.isnull().sum() : 결측치 확인하기   
2. df.drop(['컬럼명1', '컬럼명2', ...], axis=1, inplace=True) : 불필요한 '컬럼' 삭제하기   
3. df['컬럼명1'].fillna('기타', inplace=True) : null값 기타로 변경하기   
4. df.drop(df.loc[df['컬럼명1'].isnull()].index, inplace=True) : null 값이 있는 '행' 삭제하기   
5. 컬럼별로 unique 값 확인하기   
```
category_cols = ['영화명','감독', '배급사', '영화유형','영화형태','국적','장르','등급','영화구분',]   
for col in category_cols:   
    print('컬럼 [{}] UNIQUE : {}'.format(col, len(df[col].unique())))   
```
6. 감독 -> 대표 1명으로 줄이기   
7. 등급 -> 4개 등급으로 줄이기   
```
for idx, row in df.iterrows():   
    if ',' in row['등급']:   
        ratings = row['등급'].split(',')   
        # 전체, 12, 15, 청소년관람불가 순    
        if '전체' in ratings:   
            df['등급'][idx] = '전체관람가'   
        elif '12' in ratings:   
            df['등급'][idx] = '12세관람가'   
        elif '15' in ratings:   
            df['등급'][idx] = '15세관람가'   
        else:   
            df['등급'][idx] = '청소년관람불가'   
    elif df['등급'][idx] == '18세관람가' or df['등급'][idx] == '제한상영가':    
        df['등급'][idx] = '청소년관람불가'   
    else:   
        df['등급'][idx] = df['등급'][idx].replace('이상', '')   
```
8. 데이터값이 숫자여야 하는데 dtype이 object로 나오는 컬럼을 숫자값으로 변경하기   
```
# 쉼표','를 없애줘야 int로 변환이 가능   
df['전국 매출액'] = df['전국 매출액'].str.replace(pat=r',', repl=r'', regex=True)   
df['전국 매출액'] = df['전국 매출액'].astype('int64')   
   
# '전국스크린수', '전국 매출액', '전국 관객수' 하나씩 해주기   
```
9. 수치형 데이터 상관관계 확인   

<전처리 정해야할 것>   
* 개봉연월일 -> '연' / '월' 데이터로 컬럼 나눴으면
* 개봉연도 2020~2022 -> '코로나여부' 컬럼을 생성해서 1, 0 체크해서 쓸 수 있으면 어떨까
* 국적 -> 한국, 북미, 아시아, 유럽 등 그룹으로 묶어주기
* 배급사 -> 동일한 배급사 명칭 하나로
* '영화 흥행 여부'? target 컬럼 만들기
<br>
<br>

---

### 2023.03.22.수 회의록
<br> 1번 파일에서 전체 19517행에서 null값 적당히 버리고 
<br> 영화명 19161
<br> 감독 7520(7791)
<br> 배급사 814(1327)
<br> 개봉일
<br> 영화유형 1
<br> 영화형태: 4 
<br>     장편19433 옴니버스79 단편4 기타1
<br> 국적 8(72)
<br>     한국6331 일본5413 미국3888 프랑스644 영국599 중국456 독일304
<br>     캐나다227 홍콩205 스페인187.. : 나머지 기타
<br> 전국스크린수 
<br> 전국 매출액 
<br> 전국 관객수 
<br> 장르 21
<br>     ['사극', '코미디', '판타지', '드라마', '액션', '애니메이션', 'SF', '범죄', '어드벤처', '전쟁','미스터리', 
<br>     '서부극(웨스턴)', '멜로/로맨스', '스릴러', '다큐멘터리', '공포(호러)', '가족','뮤지컬', '기타', '공연', '성인물(에로)']
<br> 등급 4(17) 
<br>     청소년관람불가 15세관람가 12세관람가 전체관람가
<br> 영화구분 2 
<br>     일반영화 독립/예술영화
<br> 
<br> 
<br> 
#### 이용하려는 주요 독립변수
<br> 장르, 등급, 시즌(개봉일), 국적
<br>

<br> 감독, 배급사, 배우 => 범주형 데이터를 수치형 데이터로 변환하는 과정
<br> -   감독, 배급사 -> (영어이름 중복확인) -> 점수화
<br> -   배우, 평점 -> 네이버 크롤링 -> 점수화 
<br> 
<br> 
#### SUMMATY
<br> 우리는 이번 프로젝트에서 
<br> <랜덤포레스트(지도머신러닝 알고리즘)>를 통해서 데이터 전처리 후 주요변수 선택 예정 
<br> <다층 퍼셉트론 Multi-Layer Perceptron(cnn계열)>을 딥러닝 모델이 이용할 예정 
<br> 
<br> 독립변수 중 일부 점수화 
<br> 감독, 배우, 배급사 -> top200에서 구간별로 1~10점 
<br> 평점 -> 숫자 그대로 이용
<br> 
<br> '흥행여부'를 결정할 '전국 관객수' 기준 생각해보기  
<br>  
<br> 
#### ISSUE
<br> "resize된 약 4000개의 영화 리스트"는 2003 ~ 2021년 데이터 (resize 조건: 전국 관객수 1000 ~ 11000000명, 전국 스트린수 50)
<br> "top 200 리스트"는 2004년 이후 데이터 
<br> 이 둘을 비교했을 때 약 20개 영화가 빠지게 됨.(왕의남자, 괴물 등 당연히 들어가야하는 영화인데 빠져있어서 
<br> "서울시 데이터"를 추가적으로 받아 
<br> 스크린수와 전국 관객수를 다시 확인후 새로운 "movie_resized2.csv" 가 필요함
<br> 
<br>
#### TO DO
<br>  새롭게 받은 "movie_resized2.csv" 파일로 
<br>  감독,배급사 중복값 다시 정리 
<br>  연도, 계절 열 추가
<br>  ...
<br>  크롤링 완료하기
<br>  딥러닝 optimizer 생각해보기
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
새롭게 알게된 마크다운..어려워효..들여쓰기 하는 방법 아시는분..
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
<br> 
 
